<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE jasperReport PUBLIC "-//JasperReports//DTD Report Design//EN"
        "http://jasperreports.sourceforge.net/dtds/jasperreport.dtd">

<jasperReport name="Productos" language="java"
              pageWidth="595" pageHeight="842" columnWidth="555"
              leftMargin="20" rightMargin="20" topMargin="20" bottomMargin="20"
              whenNoDataType="AllSectionsNoDetail">

    <!-- Parámetros: deben coincidir con los que envías desde la acción -->
    <parameter name="idProducto"        class="java.lang.Integer"/>
    <parameter name="nombre"            class="java.lang.String"/>
    <parameter name="descripcion"       class="java.lang.String"/>
    <parameter name="categoria"         class="java.lang.String"/>
    <parameter name="marca"             class="java.lang.String"/>
    <parameter name="fechaExpedicion"   class="java.lang.String"/>
    <parameter name="fechaVencimiento"  class="java.lang.String"/>
    <parameter name="precioVenta"       class="java.lang.Double"/>
    <parameter name="stock"             class="java.lang.Integer"/>
    <parameter name="stockMinimo"       class="java.lang.Integer"/>
    <parameter name="stockMaximo"       class="java.lang.Integer"/>
    <parameter name="unidadMedida"      class="java.lang.String"/>
    <parameter name="estadoStock"       class="java.lang.String"/>

    <background>
        <band/>
    </background>

    <title>
        <band height="320">

            <!-- Bloque de encabezado con fondo (aumentado de 80 a 100) -->
            <rectangle>
                <reportElement x="0" y="0" width="555" height="100"
                               backcolor="#EEEEEE" mode="Opaque"/>
            </rectangle>

            <!-- Logo -->
            <image>
                <reportElement x="20" y="10" width="60" height="60"/>
                <!-- Ajusta la ruta a donde tengas el logo -->
                <imageExpression class="java.lang.String"><![CDATA["C:/Users/intim/Downloads/logo_ferreteria.jpg"]]></imageExpression>
            </image>

            <!-- Nombre ferretería -->
            <staticText>
                <reportElement x="100" y="20" width="350" height="25"/>
                <textElement textAlignment="Center" verticalAlignment="Middle">
                    <font size="18" isBold="true"/>
                </textElement>
                <text><![CDATA[Ferretería Vanessa]]></text>
            </staticText>

            <!-- Subtítulo -->
            <staticText>
                <reportElement x="100" y="45" width="350" height="20"/>
                <textElement textAlignment="Center">
                    <font size="11" isItalic="true"/>
                </textElement>
                <text><![CDATA[Ficha detallada de producto]]></text>
            </staticText>

            <!-- Valor Cliente -->
            <staticText>
                <reportElement x="165" y="60" width="260" height="12"/>
                <textElement>
                    <font size="9"/>
                </textElement>
                <text><![CDATA[Ferretería Vanessa]]></text>
            </staticText>

            <!-- Etiqueta Ubicación -->
            <staticText>
                <reportElement x="100" y="74" width="70" height="12"/>
                <textElement>
                    <font size="9" isBold="true"/>
                </textElement>
                <text><![CDATA[Ubicación:]]></text>
            </staticText>

            <!-- Valor Ubicación -->
            <staticText>
                <reportElement x="170" y="74" width="360" height="12"/>
                <textElement>
                    <font size="8"/>
                </textElement>
                <text><![CDATA[La Dalia, Matagalpa (De la Alcaldía de la Dalia media cuadra arriba)]]></text>
            </staticText>

            <!-- Etiqueta Teléfono -->
            <staticText>
                <reportElement x="100" y="88" width="70" height="12"/>
                <textElement>
                    <font size="9" isBold="true"/>
                </textElement>
                <text><![CDATA[Teléfono:]]></text>
            </staticText>

            <!-- Valor Teléfono -->
            <staticText>
                <reportElement x="170" y="88" width="120" height="12"/>
                <textElement>
                    <font size="9"/>
                </textElement>
                <text><![CDATA[+505 8624 4743]]></text>
            </staticText>

            <!-- Fecha de emisión -->
            <staticText>
                <reportElement x="355" y="88" width="80" height="15"/>
                <textElement textAlignment="Right">
                    <font size="9" isBold="true"/>
                </textElement>
                <text><![CDATA[Fecha:]]></text>
            </staticText>

            <textField pattern="dd/MM/yyyy">
                <reportElement x="440" y="88" width="100" height="15"/>
                <textElement>
                    <font size="9"/>
                </textElement>
                <!-- Fecha actual del sistema -->
                <textFieldExpression><![CDATA[new java.util.Date()]]></textFieldExpression>
            </textField>

            <!-- Línea de separación (bajada a y=105) -->
            <line>
                <reportElement x="0" y="105" width="555" height="1" forecolor="#999999"/>
            </line>

            <!-- Título sección -->
            <staticText>
                <reportElement x="0" y="110" width="200" height="20"/>
                <textElement>
                    <font size="12" isBold="true"/>
                </textElement>
                <text><![CDATA[Detalles del producto]]></text>
            </staticText>

            <!-- Caja que envuelve todos los datos -->
            <rectangle>
                <reportElement x="0" y="135" width="555" height="175"
                               forecolor="#CCCCCC" backcolor="#FFFFFF" mode="Opaque"/>
            </rectangle>

            <!-- Sección: Datos generales -->
            <staticText>
                <reportElement x="10" y="145" width="200" height="15"/>
                <textElement>
                    <font size="11" isBold="true"/>
                </textElement>
                <text><![CDATA[Datos generales]]></text>
            </staticText>

            <!-- Id -->
            <textField>
                <reportElement x="10" y="165" width="260" height="18"/>
                <textElement>
                    <font size="10"/>
                </textElement>
                <textFieldExpression><![CDATA["ID: " + $P{idProducto}]]></textFieldExpression>
            </textField>

            <!-- Nombre -->
            <textField>
                <reportElement x="10" y="183" width="260" height="18"/>
                <textElement>
                    <font size="10"/>
                </textElement>
                <textFieldExpression><![CDATA["Nombre: " + $P{nombre}]]></textFieldExpression>
            </textField>

            <!-- Descripción -->
            <textField isStretchWithOverflow="true">
                <reportElement x="10" y="201" width="260" height="35"/>
                <textElement>
                    <font size="10"/>
                </textElement>
                <textFieldExpression><![CDATA["Descripción: " + $P{descripcion}]]></textFieldExpression>
            </textField>

            <!-- Categoría -->
            <textField>
                <reportElement x="10" y="238" width="260" height="18"/>
                <textElement>
                    <font size="10"/>
                </textElement>
                <textFieldExpression><![CDATA["Categoría: " + $P{categoria}]]></textFieldExpression>
            </textField>

            <!-- Marca -->
            <textField>
                <reportElement x="10" y="256" width="260" height="18"/>
                <textElement>
                    <font size="10"/>
                </textElement>
                <textFieldExpression><![CDATA["Marca: " + $P{marca}]]></textFieldExpression>
            </textField>

            <!-- Precio de venta destacado -->
            <textField pattern="C$ #,##0.00">
                <reportElement x="10" y="274" width="260" height="20"/>
                <textElement>
                    <font size="11" isBold="true"/>
                </textElement>
                <textFieldExpression><![CDATA[$P{precioVenta}]]></textFieldExpression>
            </textField>

            <!-- Sección: Inventario -->
            <staticText>
                <reportElement x="290" y="145" width="200" height="15"/>
                <textElement>
                    <font size="11" isBold="true"/>
                </textElement>
                <text><![CDATA[Inventario]]></text>
            </staticText>

            <!-- Stock -->
            <textField>
                <reportElement x="290" y="165" width="250" height="18"/>
                <textElement>
                    <font size="10"/>
                </textElement>
                <textFieldExpression><![CDATA["Stock actual: " + $P{stock}]]></textFieldExpression>
            </textField>

            <!-- Stock mínimo -->
            <textField>
                <reportElement x="290" y="183" width="250" height="18"/>
                <textElement>
                    <font size="10"/>
                </textElement>
                <textFieldExpression><![CDATA["Stock mínimo: " + $P{stockMinimo}]]></textFieldExpression>
            </textField>

            <!-- Stock máximo -->
            <textField>
                <reportElement x="290" y="201" width="250" height="18"/>
                <textElement>
                    <font size="10"/>
                </textElement>
                <textFieldExpression><![CDATA["Stock máximo: " + $P{stockMaximo}]]></textFieldExpression>
            </textField>

            <!-- Unidad de medida -->
            <textField>
                <reportElement x="290" y="219" width="250" height="18"/>
                <textElement>
                    <font size="10"/>
                </textElement>
                <textFieldExpression><![CDATA["Unidad de medida: " + $P{unidadMedida}]]></textFieldExpression>
            </textField>

            <!-- Estado del stock -->
            <textField>
                <reportElement x="290" y="237" width="250" height="18"/>
                <textElement>
                    <font size="10"/>
                </textElement>
                <textFieldExpression><![CDATA["Estado del stock: " + $P{estadoStock}]]></textFieldExpression>
            </textField>

            <!-- Sección: Fechas -->
            <staticText>
                <reportElement x="290" y="255" width="200" height="15"/>
                <textElement>
                    <font size="11" isBold="true"/>
                </textElement>
                <text><![CDATA[Fechas]]></text>
            </staticText>

            <!-- Fecha de expedición -->
            <textField>
                <reportElement x="290" y="273" width="250" height="18"/>
                <textElement>
                    <font size="10"/>
                </textElement>
                <textFieldExpression><![CDATA["Fecha expedición: " + $P{fechaExpedicion}]]></textFieldExpression>
            </textField>

            <!-- Fecha de vencimiento -->
            <textField>
                <reportElement x="290" y="291" width="250" height="18"/>
                <textElement>
                    <font size="10"/>
                </textElement>
                <textFieldExpression><![CDATA["Fecha vencimiento: " + $P{fechaVencimiento}]]></textFieldExpression>
            </textField>

        </band>
    </title>

    <!-- Banda detail mínima -->
    <detail>
        <band height="1"/>
    </detail>

    <!-- Pie de página -->
    <pageFooter>
        <band height="30">
            <!-- Línea superior -->
            <line>
                <reportElement x="0" y="0" width="555" height="1" forecolor="#999999"/>
            </line>

            <!-- Texto descriptivo -->
            <staticText>
                <reportElement x="0" y="5" width="350" height="15"/>
                <textElement>
                    <font size="9" isItalic="true"/>
                </textElement>
                <text><![CDATA[Reporte generado por el sistema FerreControl – Control de inventario y facturación]]></text>
            </staticText>

            <!-- Número de página fijo: Página 1 de 1 -->
            <textField>
                <reportElement x="400" y="5" width="155" height="15"/>
                <textElement textAlignment="Right">
                    <font size="9"/>
                </textElement>
                <textFieldExpression><![CDATA["Página " + $V{PAGE_NUMBER} + " de 1"]]></textFieldExpression>
            </textField>
        </band>
    </pageFooter>

</jasperReport>
